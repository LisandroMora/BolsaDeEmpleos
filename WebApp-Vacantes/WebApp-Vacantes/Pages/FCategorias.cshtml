@page "/categoria/id={IdCategoria:int}"

@inject HttpClient Http
@using System.Net.Http
@using System.Net.Http.Json
@using apiVacantes.Models
@using Microsoft.AspNetCore.Http.Extensions
@using Microsoft.AspNetCore.Authorization;
@attribute [AllowAnonymous]


@{
    string url = Request.GetDisplayUrl();
    int BeforeID = url.IndexOf("=");

    int id = Convert.ToInt32(url.Substring(BeforeID + 1, (url.Length - BeforeID) - 1));
    Trabajos[] trabajo = await Http.GetFromJsonAsync<Trabajos[]>("/api/Vacantes");
    Categoria categoria = await Http.GetFromJsonAsync<Categoria>($"/api/Categoria/{id}");
}



<div class="container-fluid p-5">
    <a href="" class="h3 text-decoration-none link-info mb-5">@categoria.Nombre</a>
    <table class="table p-5 table-striped table-bordered table-hover mt-3">
        <thead class="table-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Ubicacion</th>
                <th scope="col">Posicion</th>
                <th scope="col">Empresa</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var vacante in trabajo.Where(x => x.IdCategoria == categoria.IdCategoria))
            {
                <tr>
                    <th scope="row">1</th>
                    <td>
                        @Html.DisplayFor(modelItem => vacante.Ubicacion)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => vacante.Posicion)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => vacante.Empresa)
                    </td>
                    <td class="col-2"><a href="../detalles/id=@vacante.IdTrabajo" class="btn btn-outline-success w-75 mx-auto d-block">Ver Vacante</a></td>
                </tr>

            }
        </tbody>
    </table>
</div>



